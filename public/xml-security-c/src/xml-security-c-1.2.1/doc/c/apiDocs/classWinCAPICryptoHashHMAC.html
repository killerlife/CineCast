<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>XML-Security-C: WinCAPICryptoHashHMAC Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>WinCAPICryptoHashHMAC Class Reference<br>
<small>
[<a class="el" href="group__wincapicrypto.html">Windows Crypto API Interface</a>]</small>
</h1><code>#include &lt;<a class="el" href="WinCAPICryptoHashHMAC_8hpp-source.html">WinCAPICryptoHashHMAC.hpp</a>&gt;</code>
<p>
Inheritance diagram for WinCAPICryptoHashHMAC:<p><center><img src="classWinCAPICryptoHashHMAC__inherit__graph.png" border="0" usemap="#WinCAPICryptoHashHMAC__inherit__map" alt="Inheritance graph"></center>
<map name="WinCAPICryptoHashHMAC__inherit__map">
<area href="classXSECCryptoHash.html" shape="rect" coords="36,9,166,33" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for WinCAPICryptoHashHMAC:<p><center><img src="classWinCAPICryptoHashHMAC__coll__graph.png" border="0" usemap="#WinCAPICryptoHashHMAC__coll__map" alt="Collaboration graph"></center>
<map name="WinCAPICryptoHashHMAC__coll__map">
<area href="classXSECCryptoHash.html" shape="rect" coords="36,9,166,33" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classWinCAPICryptoHashHMAC-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Implementation of HMAC Hash functions in the Windows providers. 
<p>
Uses the Windows Crypt* API functions to implement an HMAC.<p>
Unfortunately the Windows Crypto API does not allow callers to enter an HMAC key directly. It relies on a seed being entered into a digest function that is then used to derive a key that can be used in an HMAC function.<p>
Two types of key can therefore be used - a direct Windows key, or a "standard" string as the HMAC key. In the latter case, the HMAC function is implemented internally around a standard Windows hash function. In the former case, the Windows HMAC functions are used. (The latter case is mainly for interoperability testing, where the key is provided and needs to be entered "as is". 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Constructors and Destructors</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWinCAPICryptoHashHMAC.html#z116_0">WinCAPICryptoHashHMAC</a> (HCRYPTPROV prov, <a class="el" href="classXSECCryptoHash.html#w7">XSECCryptoHash::HashType</a> alg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#z116_0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWinCAPICryptoHashHMAC.html#z116_1">~WinCAPICryptoHashHMAC</a> ()</td></tr>

<tr><td colspan="2"><div class="groupHeader">HMAC Functions</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWinCAPICryptoHashHMAC.html#z117_0">setKey</a> (<a class="el" href="classXSECCryptoKey.html">XSECCryptoKey</a> *key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the HMAC key.  <a href="#z117_0"></a><br></td></tr>
<tr><td colspan="2"><div class="groupHeader">Hash functions</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWinCAPICryptoHashHMAC.html#z118_0">reset</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reset the hash function.  <a href="#z118_0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWinCAPICryptoHashHMAC.html#z118_1">hash</a> (unsigned char *data, unsigned int length)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Hash some data.  <a href="#z118_1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWinCAPICryptoHashHMAC.html#z118_2">finish</a> (unsigned char *hash, unsigned int maxLength)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finish up a Digest operation and read the result.  <a href="#z118_2"></a><br></td></tr>
<tr><td colspan="2"><div class="groupHeader">Information functions</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classXSECCryptoHash.html#w7">HashType</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWinCAPICryptoHashHMAC.html#z119_0">getHashType</a> (void)</td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="z116_0" doxytag="WinCAPICryptoHashHMAC::WinCAPICryptoHashHMAC"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">WinCAPICryptoHashHMAC::WinCAPICryptoHashHMAC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">HCRYPTPROV&nbsp;</td>
          <td class="mdname" nowrap> <em>prov</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classXSECCryptoHash.html#w7">XSECCryptoHash::HashType</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>alg</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor. 
<p>
Create the object, with the indicated algorithm (Currently supports MD5 and SHA1)<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>prov</em>&nbsp;</td><td>handle to a provider that supports the required algorithm. Both PROV_RSA_FULL and PROV_DSS support MD5 and SHA1 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>alg</em>&nbsp;</td><td>Digest algorithm to use </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="z116_1" doxytag="WinCAPICryptoHashHMAC::~WinCAPICryptoHashHMAC"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual WinCAPICryptoHashHMAC::~WinCAPICryptoHashHMAC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="z118_2" doxytag="WinCAPICryptoHashHMAC::finish"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual unsigned int WinCAPICryptoHashHMAC::finish           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>hash</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>maxLength</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Finish up a Digest operation and read the result. 
<p>
This call tells the CryptoHash object that the input is complete and to finalise the Digest. The output of the digest is read into the hash buffer (at most maxLength bytes). This is effectively the signature for the data that has been run through the HMAC function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hash</em>&nbsp;</td><td>The buffer the hash should be read into. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>maxLength</em>&nbsp;</td><td>The maximum number of bytes to be read into hash </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The number of bytes copied into the hash buffer </dd></dl>

<p>
Implements <a class="el" href="classXSECCryptoHash.html#z154_2">XSECCryptoHash</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z119_0" doxytag="WinCAPICryptoHashHMAC::getHashType"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual <a class="el" href="classXSECCryptoHash.html#w7">HashType</a> WinCAPICryptoHashHMAC::getHashType           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Determine the hash type of this object<p>
<dl compact><dt><b>Returns:</b></dt><dd>The hash type </dd></dl>

<p>
Implements <a class="el" href="classXSECCryptoHash.html#z155_0">XSECCryptoHash</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z118_1" doxytag="WinCAPICryptoHashHMAC::hash"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void WinCAPICryptoHashHMAC::hash           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>length</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Hash some data. 
<p>
Take length bytes of data from the data buffer and update the hash that already exists. This function may (and normally will) be called many times for large blocks of data.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>The buffer containing the data to be hashed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>length</em>&nbsp;</td><td>The number of bytes to be read from data </td></tr>
  </table>
</dl>

<p>
Implements <a class="el" href="classXSECCryptoHash.html#z154_1">XSECCryptoHash</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z118_0" doxytag="WinCAPICryptoHashHMAC::reset"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void WinCAPICryptoHashHMAC::reset           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reset the hash function. 
<p>
Re-initialises the digest structure. 
<p>
Implements <a class="el" href="classXSECCryptoHash.html#z154_0">XSECCryptoHash</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z117_0" doxytag="WinCAPICryptoHashHMAC::setKey"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void WinCAPICryptoHashHMAC::setKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classXSECCryptoKey.html">XSECCryptoKey</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>key</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the HMAC key. 
<p>
Sets the key - which needs to have a base class of <a class="el" href="classWinCAPICryptoKeyHMAC.html">WinCAPICryptoKeyHMAC</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>The key the HMAC function should use. </td></tr>
  </table>
</dl>

<p>
Implements <a class="el" href="classXSECCryptoHash.html#z156_0">XSECCryptoHash</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="WinCAPICryptoHashHMAC_8hpp-source.html">WinCAPICryptoHashHMAC.hpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Sun Jul 3 17:55:35 2005 for XML-Security-C by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
